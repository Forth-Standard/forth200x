<!--Article: 141636 of comp.lang.forth
From: "C. G. Montgomery" <cgm@physics.utoledo.edu>
Newsgroups: comp.lang.forth
Subject: RfD:  Ambiguity in FATAN2
Date: Mon, 23 Mar 2009 22:43:05 -0400
Organization: the wetware works
Lines: 55
Message-ID: <gq9hcu$4jf$1@pyrite.mv.net>
Reply-To: cgm@physics.utoledo.edu
NNTP-Posting-Host: bnh-2-36.mv.com
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7Bit
X-Trace: pyrite.mv.net 1237862624 4719 199.125.99.100 (24 Mar 2009 02:43:44 GMT)
X-Complaints-To: abuse@mv.net
NNTP-Posting-Date: Tue, 24 Mar 2009 02:43:44 +0000 (UTC)
User-Agent: KNode/0.10.9
Path: tunews.univie.ac.at!aconews-feed.univie.ac.at!news.wsr.ac.at!news.luga.at!news.albasani.net!news2.arglkargh.de!news.glorb.com!news2.glorb.com!news.mv.net!not-for-mail
Xref: tunews.univie.ac.at comp.lang.forth:141636
-->
<pre>
RfD:  Ambiguity in FATAN2
C. G. Montgomery, 23 Mar 2009

Problem

The ANS definition is:

12.6.2.1489 FATAN2 
 f-a-tan-two FLOATING EXT     ( F: r1 r2 -- r3 ) or ( r1 r2 -- r3 ) 
 r3 is the radian angle whose tangent is r1/r2. An ambiguous condition 
exists if r1 and r2 are zero. 

This is incomplete, since it does not specify which of the countably 
infinite set of angles satisfying this specification will be returned as
r3.

Other computer languages which provide this function commonly specify the
"principal angle", the one between -pi and pi.

Proposal

The first sentence of the definition should be expanded to:
 r3 is the radian angle, greater than -pi and less than or equal to pi,
whose tangent is r1/r2.

Remarks

Discussions in comp.lang.forth have included general agreement that the
present definition is ambiguous, probably unintentionally, and that
specifying the principal angle would be the favored correction.

Experience

A summary quoted from a posting by David N. Williams in comp.lang.forth:

                      FATAN2 CONVENTIONS
   implementation    -pi to pi   0 to 2pi
   --------------------------------------
   pfe 0.33.70          yes         no
   gforth 0.7.0         yes         no
   kforth 1.4.0         yes         no
   iForth 3.0.3         yes         no
   4tH 3.5c             yes         no
   SwiftForth 3         no          yes
   VFX Forth  4         yes         no
   Win32Forth 6.13.00   yes         no

Testing

A set of tests is available at

http://www-personal.umich.edu/~williams/archive/forth/utilities/fatan2-test.fs
</pre>
<!--
\ end of RfD

regards to all   cgm
-->